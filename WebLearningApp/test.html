<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quiz</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
            padding: 20px;
            margin: 0;
        }

        .page-content {
            max-width: 900px;
            margin: 40px auto;
            background: #fff;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }

        .question-card {
            background: #f7f7f7;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .question-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .question-card p {
            margin-bottom: 10px;
            font-weight: 500;
        }

        .options button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px 20px;
            margin: 5px 0;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: #fff;
            font-size: 16px;
            transition: transform 0.2s, background 0.3s, box-shadow 0.3s;
        }

        .options button:hover {
            transform: scale(1.03);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .correct {
            background-color: #4CAF50 !important;
            color: white;
        }

        .wrong {
            background-color: #f44336 !important;
            color: white;
        }

        #score {
            font-size: 20px;
            font-weight: 600;
            margin-top: 20px;
            text-align: center;
        }

        #submit-btn {
            margin-top: 25px;
            width: 50%;
            font-size: 18px;
        }
    </style>
</head>
<body>

<div class="page-content">
    <h1>Topic Quiz</h1>
    <div id="quiz"></div>
    <div id="score"></div>
    <button id="submit-btn" onclick="finishQuiz()">Finish Quiz</button>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const topic = params.get("topic");

const questionsData = {
    html: [
        {q: "HTML stands for?", options: ["HyperText Markup Language", "HighText Markup Language", "Hyperlink Text Mark Language", "None"], answer: 0},
        {q: "Tag used for paragraph?", options: ["<p>", "<h1>", "<div>", "<span>"], answer: 0},
        {q: "Tag for image?", options: ["<img>", "<pic>", "<image>", "<src>"], answer: 0},
        {q: "HTML is a ____ language?", options: ["markup", "programming", "scripting", "assembly"], answer: 0},
        {q: "Tag used for headings?", options: ["<h1>", "<p>", "<div>", "<title>"], answer: 0}
    ],
    css: [
        {q: "CSS stands for?", options: ["Cascading Style Sheets", "Colorful Style Sheets", "Creative Style Sheets", "Computer Style Sheets"], answer: 0},
        {q: "CSS controls ____?", options: ["styling", "content", "structure", "behavior"], answer: 0},
        {q: "Property to change color?", options: ["color", "font", "background", "style"], answer: 0},
        {q: "Inline CSS uses which attribute?", options: ["style", "class", "id", "css"], answer: 0},
        {q: "External CSS uses which tag?", options: ["<link>", "<script>", "<style>", "<css>"], answer: 0}
    ],
    js: [
        {q: "JavaScript is a ____ language?", options: ["programming", "markup", "scripting", "database"], answer: 0},
        {q: "Keyword to declare a variable?", options: ["let", "var", "const", "all"], answer: 3},
        {q: "Function to print in console?", options: ["console.log", "print()", "alert()", "write()"], answer: 0},
        {q: "JS is used for ____?", options: ["interactivity", "structure", "style", "server"], answer: 0},
        {q: "JavaScript runs in the ____?", options: ["browser", "server", "database", "all"], answer: 0}
    ]
};

let quizDiv = document.getElementById("quiz");
let scoreDiv = document.getElementById("score");
let userAnswers = [];

questionsData[topic].forEach((q, i) => {
    const card = document.createElement("div");
    card.classList.add("question-card");

    const question = document.createElement("p");
    question.textContent = `${i + 1}. ${q.q}`;
    card.appendChild(question);

    const optionsDiv = document.createElement("div");
    optionsDiv.classList.add("options");

    q.options.forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = () => selectAnswer(i, idx, btn);
        optionsDiv.appendChild(btn);
    });

    card.appendChild(optionsDiv);
    quizDiv.appendChild(card);
});

function selectAnswer(qIndex, optIndex, btn) {
    userAnswers[qIndex] = optIndex;
    const allBtns = btn.parentElement.querySelectorAll("button");
    allBtns.forEach(b => b.classList.remove("selected"));
    btn.classList.add("selected");
}

function finishQuiz() {
    let score = 0;
    document.querySelectorAll(".question-card").forEach((card, i) => {
        const correctIndex = questionsData[topic][i].answer;
        const allBtns = card.querySelectorAll("button");
        allBtns.forEach((btn, idx) => {
            btn.disabled = true;
            if(idx === correctIndex) btn.classList.add("correct");
            if(userAnswers[i] === idx && idx !== correctIndex) btn.classList.add("wrong");
        });
        if(userAnswers[i] === correctIndex) score++;
    });

    scoreDiv.textContent = `Your Score: ${score} / ${questionsData[topic].length}`;

    if(score >= 3){
        alert("Test Passed!");
        if(topic==="html") localStorage.setItem("html_passed", "true");
        if(topic==="css") localStorage.setItem("css_passed", "true");
        if(topic==="js") localStorage.setItem("js_passed", "true");
    } else {
        alert("Score 3 or more to pass.");
    }
}
</script>

</body>
</html>

